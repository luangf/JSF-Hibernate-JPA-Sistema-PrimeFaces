<?xml version="1.0" encoding="ISO-8859-1" ?>

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<title>Cadastro Users</title>
</h:head>

<h:body>
	<h:form>
		<p:breadCrumb>
			<p:menuitem action="index.jsf"/>
			<p:menuitem value="Página Inicial JSF" action="index.jsf"/>
			<p:menuitem value="Página PrimeFaces" action="primefaces.jsf"/>
		</p:breadCrumb>
	</h:form>

	<h:form id="formCadastro">
		<p:messages id="msg" showDetail="true"/>

		<p:panelGrid columns="2">
			<p:outputLabel value="ID:" for="id"/>
			<p:inputText value="#{usuarioPessoaManagedBean.usuarioPessoa.id}" id="id" readonly="true"/>
			
			<p:outputLabel value="Nome" for="nome"/>
			<p:inputText value="#{usuarioPessoaManagedBean.usuarioPessoa.nome}" id="nome" required="true" 
				requiredMessage="Informe o nome por favor">
				<p:watermark value="Informe o nome aqui" for="nome"/>
			</p:inputText>
			
			<p:outputLabel value="Sobrenome:" for="sobrenome"/>
			<p:inputText value="#{usuarioPessoaManagedBean.usuarioPessoa.sobrenome}" id="sobrenome" required="true"
				requiredMessage="Informe o sobrenome por favor"/>
				
			<p:outputLabel value="Sexo:"/>
			<p:selectOneMenu value="#{usuarioPessoaManagedBean.usuarioPessoa.sexo}">
				<f:selectItem itemLabel="[-Selecione-]" itemValue="0"/>
				<f:selectItem itemLabel="Feminino" itemValue="F"/>
				<f:selectItem itemLabel="Masculino" itemValue="M"/>
			</p:selectOneMenu>
			
			<p:outputLabel value="Email:" for="email"/>
			<p:inputText value="#{usuarioPessoaManagedBean.usuarioPessoa.email}" id="email"/>
			
			<p:outputLabel value="Idade:" for="idade"/>
			<p:inputText value="#{usuarioPessoaManagedBean.usuarioPessoa.idade}" id="idade"/>
			
			<p:outputLabel value="Salário" for="salario"/>
			<p:inputText value="#{usuarioPessoaManagedBean.usuarioPessoa.salario}" id="salario"/>
			
			<p:outputLabel value="Login:" for="login"/>
			<p:inputText value="#{usuarioPessoaManagedBean.usuarioPessoa.login}" id="login"/>
			
			<p:outputLabel value="Senha:" for="senha"/>
			<p:password value="#{usuarioPessoaManagedBean.usuarioPessoa.senha}" id="senha"/>
		</p:panelGrid>
		
		<br/>
		<p:commandButton value="Novo" action="#{usuarioPessoaManagedBean.novo}" title="Novo" immediate="true" style="margin-right:4px;">
				<f:ajax execute="@this" render="@form"/>
		</p:commandButton>
			
		<p:commandButton ajax="false" value="Salvar" action="#{usuarioPessoaManagedBean.salvar}" title="Salvar"/>
		
	</h:form>

	<br/>

	<h:form>
		<p:dataTable value="#{usuarioPessoaManagedBean.list}" var="user">
			<f:facet name="header">Lista de Usuários Cadastrados</f:facet>
			
			<p:column headerText="ID">
				<h:outputText value="#{user.id}"/>
			</p:column>
			
			<p:column headerText="Nome">
				<h:outputText value="#{user.nome}"/>
			</p:column>
			
			<p:column headerText="Sobrenome">
				<h:outputText value="#{user.sobrenome}"/>
			</p:column>
			
			<p:column headerText="Email">
				<h:outputText value="#{user.email}"/>
			</p:column>
			
			<p:column headerText="Login">
				<h:outputText value="#{user.login}"/>
			</p:column>
			
			<p:column headerText="Editar">
				<h:commandLink title="Editar" id="botaoEditar">
					<f:setPropertyActionListener value="#{user}" target="#{usuarioPessoaManagedBean.usuarioPessoa}"/>
					<h:graphicImage value="resources/img/editar.png" width="40"/>
					<f:ajax execute="botaoEditar" render=":formCadastro"/>
				</h:commandLink>
			</p:column>
			
			<p:column headerText="Excluir">
				<h:commandLink action="#{usuarioPessoaManagedBean.excluir}" title="Excluir">
					<f:setPropertyActionListener value="#{user}" target="#{usuarioPessoaManagedBean.usuarioPessoa}"/>
					<h:graphicImage value="resources/img/excluir.png" width="40"/>
					<f:ajax execute="@this" render="@form :formCadastro:msg"/>
				</h:commandLink>
			</p:column>
			
			<p:column headerText="Telefones">
				<h:commandLink action="telefoneprimefaces" title="Telefones">
					<f:param name="idUser" value="#{user.id}"/>
					<h:graphicImage value="resources/img/telefone.png" width="40"/>
				</h:commandLink>
			</p:column>
		</p:dataTable>
	</h:form>
</h:body>

</html>